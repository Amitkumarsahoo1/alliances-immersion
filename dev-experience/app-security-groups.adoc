= Application Security Groups

== Goal

In this section, you will enable a security group for your space.

== Exercise

*Note*: You must be logged in as an `admin` to manipulate security groups.

. Review the documenation on link:http://docs.pivotal.io/pivotalcf/adminguide/app-sec-groups.html[Application Security Groups]

. A script for binding a security group is included link:https://github.com/omearaj/securityGroups/blob/master/scripts/setSecGroups.sh[here] as a reference only.
+
*Note*: For this exercise we don't want to bind to/unbind any of the staging groups.  We want to bind the running group and to the development space.
+

. Create a new rules file for your space

. Create the new security group for your org/space
+
[source,bash]
----
$ cf create-security-group
----
+


=== Disabling Access

. Block all external tcp access (be sure UDP is open).  You can do this with an empty file.



. Bind the security group to your space
+
[source,bash]
----
$ cf bind-security-group
----
+

* Restage your microservice.

* Why does it fail?

=== Modify to Allow Egress

. Modify your security group file to allow egress to the bound services.

* How do you determine what ports need to be opened?

. Update the security group and restart your microservice.

. Push your security group config file to your git repository.
